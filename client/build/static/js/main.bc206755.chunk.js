(this["webpackJsonpsecondary-isolations"]=this["webpackJsonpsecondary-isolations"]||[]).push([[0],{14:function(e,t,a){"use strict";(function(e){var n=a(28),r=a.n(n).a.create({baseURL:"http://localhost:".concat(e.port||5e3,"/api"),withCredentials:!0}),s={createKit:function(e){return r.post("/kit",e)},updateKitById:function(e,t){return r.put("/kit/".concat(e),t)},deleteKitById:function(e){return r.delete("/kit/".concat(e))},getAllKits:function(){return r.get("/kits")},logIn:function(e){return r.post("/login",e)},checkLoginStatus:function(){return r.get("/login")},logOut:function(){return r.post("/logout")}};t.a=s}).call(this,a(22))},16:function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"g",(function(){return b})),a.d(t,"a",(function(){return K})),a.d(t,"f",(function(){return w})),a.d(t,"e",(function(){return C})),a.d(t,"b",(function(){return D}));var n=a(7),r=a(8),s=a(9),c=a(10),o=a(0),l=a.n(o),i=a(26),u=a(6),p=Object(u.g)((function(e){var t=e.history,a=(e.location,e.match,e.staticContext,e.to),n=e.onClick,r=e.kit,s=Object(i.a)(e,["history","location","match","staticContext","to","onClick","kit"]);return l.a.createElement("button",Object.assign({},s,{onClick:function(e){n&&n(e),t.push(a,r)}}))})),d=(a(57),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"page"},l.a.createElement("header",null,l.a.createElement("h3",{className:"page-title"},"Secondary Isolation Calculator"),l.a.createElement("h5",{className:"home-subtitle"},"For"," ",l.a.createElement("a",{className:"miltenyi-link",href:"https://www.miltenyibiotec.com/US-en/",target:"_blank",rel:"noopener noreferrer"},"Miltenyi Biotec")," ","Kits")),l.a.createElement("div",{className:"home-container-species-buttons"},this.props.allSpecies.map((function(t){return l.a.createElement(p,{to:"/kits",className:"species-button",onClick:function(){return e.props.selectSpecies(t)},key:t},t)}))),l.a.createElement("footer",null,l.a.createElement(p,{to:"/table",className:"nav-button table-button"},"Table (",this.props.rowCount," Samples)")))}}]),a}(o.Component)),m=(a(58),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).sortKitsByName=function(e){return e.sort((function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase();return a<n?-1:a>n?1:0}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"page"},l.a.createElement("header",null,l.a.createElement("h3",{className:"page-title"},this.props.currentSpecies)),l.a.createElement("div",{className:"kits-body"},l.a.createElement("div",{className:"kit-section section-positive-selection"},l.a.createElement("h5",{className:"kit-section-title"},"Positive Selection"),l.a.createElement("div",{className:"kit-section-list"},this.props.currentPosKits&&this.sortKitsByName(this.props.currentPosKits).map((function(t){return l.a.createElement("div",{className:"kit-info-container",key:t.id},l.a.createElement("div",{className:"kit-name-container"},l.a.createElement("b",null,t.name),l.a.createElement("div",null,t.id)),l.a.createElement(p,{to:"/edit/".concat(t.id),className:e.props.loggedIn?"nav-button":"logged-out",kit:t},"Edit Kit"),l.a.createElement("div",{className:"kit-options-container"},l.a.createElement("button",{className:"kit-options-button kit-remove-button",onClick:function(){e.props.updateTable("subtract",t)}},l.a.createElement("b",null,"-")),l.a.createElement("div",{className:"kit-count"},e.props.tableKitIDs[t.id]||0),l.a.createElement("button",{className:"kit-options-button kit-add-button",onClick:function(){e.props.updateTable("add",t)}},l.a.createElement("b",null,"+"))))})))),l.a.createElement("div",{className:"kit-section section-negative-selection"},l.a.createElement("h5",{className:"kit-section-title"},"Negative Selection"),l.a.createElement("div",{className:"kit-section-list"},this.props.currentNegKits&&this.sortKitsByName(this.props.currentNegKits).map((function(t){return l.a.createElement("div",{className:"kit-info-container",key:t.id},l.a.createElement("div",{className:"kit-name-container"},l.a.createElement("b",null,t.name),l.a.createElement("div",null,t.id)),l.a.createElement(p,{to:"/edit/".concat(t.id),className:e.props.loggedIn?"nav-button":"logged-out",kit:t},"Edit Kit"),l.a.createElement("div",{className:"kit-options-container"},l.a.createElement("button",{className:"kit-options-button kit-remove-button",onClick:function(){e.props.updateTable("subtract",t)}},l.a.createElement("b",null,"-")),l.a.createElement("div",{className:"kit-count"},e.props.tableKitIDs[t.id]||0),l.a.createElement("button",{className:"kit-options-button kit-add-button",onClick:function(){e.props.updateTable("add",t)}},l.a.createElement("b",null,"+"))))}))))),l.a.createElement("footer",null,l.a.createElement(p,{to:"/",className:"nav-button home-button"},"Home"),l.a.createElement(p,{to:"/create",className:this.props.loggedIn?"nav-button":"logged-out"},"Create Kit"),l.a.createElement(p,{to:"/table",className:"nav-button table-button"},"Table (",this.props.rowCount," Samples)")))}}]),a}(o.Component)),b=(a(59),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).generateRows=function(t){for(var a=e.props.tableKitIDs[t.id],n=1,r=[],s=function(){var a=n,s=t.id+" "+a;r.push(l.a.createElement("tr",{key:a},l.a.createElement("td",{className:"user-input-cell"},l.a.createElement("input",{className:"user-input",onChange:function(a){return e.props.updateRowCellCount("sampleID",t.species,s,a.target.value)},value:e.props.tableRowsHash[t.species][s][0]||""})),l.a.createElement("td",{className:"user-input-cell"},l.a.createElement("input",{className:"user-input",onKeyPress:function(e){(e.charCode<48&&46!==e.charCode||e.charCode>57)&&e.preventDefault()},onChange:function(a){return e.props.updateRowCellCount("cellCount",t.species,s,a.target.value)},value:e.props.tableRowsHash[t.species][s][1]||""})),t.constants.map((function(a,n){return a[0].includes("(min)")||a[0].includes("(times x mL)")||a[0].includes("(g x min)")?l.a.createElement("td",{key:n},a[1]):l.a.createElement("td",{key:n},Number(a[1])*e.props.tableRowsHash[t.species][s][1]/10||"")})))),++n};n<=a;)s();return r},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"page"},l.a.createElement("div",{className:"groups-container",id:"divToPrint"},this.props.arrayedKitData.map((function(t){return l.a.createElement("div",{className:"tables-container",key:t[0]},l.a.createElement("div",{className:"tables-header"},l.a.createElement("div",null),l.a.createElement(p,{to:"/kits",className:"species-name",onClick:function(){return e.props.selectSpecies(t[0])},key:t[0]},t[0]),l.a.createElement("button",{className:"delete-button delete-species no-print",onClick:function(){return e.props.deleteSpeciesFromTable(t[0])}},"x")),t[1].map((function(t){return l.a.createElement("table",{className:"kit-table",key:t.id},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:t.constants.length+2},l.a.createElement("div",{className:"kit-table-title"},l.a.createElement(p,{to:"/edit/".concat(t.id),className:e.props.loggedIn?"nav-button no-print":"logged-out",kit:t},"Edit Kit"),l.a.createElement("div",null,l.a.createElement("div",null,t.name,": ",t.id),l.a.createElement("div",null,"(",t.type," Selection)")),l.a.createElement("button",{className:"delete-button delete-kit no-print",onClick:function(){return e.props.deleteKitFromTable(t.id,t.species)}},"x")))),l.a.createElement("tr",{className:"kit-multipliers-row"},l.a.createElement("th",{colSpan:2},"Constants:"),t.constants.map((function(e,t){return l.a.createElement("th",{key:t},e[1])}))),l.a.createElement("tr",null,l.a.createElement("th",null,"Sample ID"),l.a.createElement("th",null,"Cell Count (10",l.a.createElement("sup",null,"6"),")"),t.constants.map((function(e,t){return l.a.createElement("th",{key:t},e[0])})))),l.a.createElement("tbody",null,e.generateRows(t)),l.a.createElement("tfoot",{className:"no-print"},l.a.createElement("tr",null,l.a.createElement("td",{colSpan:t.constants.length+2},l.a.createElement("div",{className:"kit-table-footer"},l.a.createElement("button",{className:"kit-table-row-button add-row-button",onClick:function(){return e.props.updateTable("add",t)}},"Add Row"),l.a.createElement("button",{className:"kit-table-row-button subtract-row-button",onClick:function(){return e.props.updateTable("subtract",t)}},"Subtract Row"))))))})))}))),l.a.createElement("footer",null,l.a.createElement("button",{className:"nav-button",onClick:function(){e.props.history.goBack()}},"Back"),l.a.createElement(p,{to:"/",className:"nav-button home-button"},"Home"),l.a.createElement("button",{className:"nav-button clear-table-button",onClick:function(){e.props.clearTable()}},"Clear Table"),l.a.createElement("button",{className:"nav-button",onClick:function(){window.print()}},"Print")))}}]),a}(o.Component)),f=a(11),h=a(25),g=a(19),v=a(1),E=a.n(v),k=a(2),S=a(17),y=a(14),K=(a(77),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).componentDidMount=Object(k.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.props.match.params.kitID){e.next=17;break}if(!r.props.location.state){e.next=9;break}return t=r.extractConstantNames(r.props.location.state.constants),e.next=5,r.setState(r.props.location.state);case 5:return e.next=7,r.setState({constants:t});case 7:e.next=14;break;case 9:return console.log("Fetching saved update kit data..."),a=JSON.parse(localStorage.getItem("updateState")),e.next=13,r.setState(a);case 13:console.log("Saved update kit data loaded.");case 14:r.updateLocalStorage("update"),e.next=22;break;case 17:return console.log("Fetching saved create kit data..."),n=JSON.parse(localStorage.getItem("createState")),e.next=21,r.setState(n);case 21:console.log("Saved create kit data loaded.");case 22:case"end":return e.stop()}}),e)}))),r.extractConstantNames=function(e){return e.map((function(e){var t=e[0].split(" (");return t[1]="(".concat(t[1]),[].concat(Object(g.a)(t),[e[1]])}))},r.updateLocalStorage=function(e){"create"===e?localStorage.setItem("createState",JSON.stringify(r.state)):"update"===e&&localStorage.setItem("updateState",JSON.stringify(r.state))},r.handleInput=function(){var e=Object(k.a)(E.a.mark((function e(t,a,n){var s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(S.cloneDeep)(r.state.constants),!n){e.next=7;break}return"constantName"===n?s[a][0]=t.target.value:"constantUnit"===n?s[a][1]=t.target.value:"constantValue"===n&&(s[a][2]=t.target.value),e.next=5,r.setState({constants:s});case 5:e.next=10;break;case 7:return e.next=9,r.setState(Object(h.a)({},t.target.name,t.target.value));case 9:r.props.allKitIDs.has(r.state.id)?r.setState({duplicateID:!0}):r.setState({duplicateID:!1});case 10:r.updateLocalStorage(r.props.match.params.kitID?"update":"create");case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),r.checkID=function(){r.props.allKitIDs.has(r.state.id)&&alert("This kit ID is already in use.")},r.capitalizeWords=function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" ")},r.capitalizeFields=function(e,t,a){return{nameCap:r.capitalizeWords(e),speciesCap:r.capitalizeWords(t),constantsCap:a.map((function(e){e[0]=r.capitalizeWords(e[0]);var t=[];return t.push(e[0].concat(" "+e[1])),t.push(e[2]),t}))}},r.checkForEmptyFields=function(e,t,a,n,r){var s,c=!1,o=Object(f.a)(r);try{for(o.s();!(s=o.n()).done;){var l=s.value;l[0]&&l[1]&&l[2]||(c=!0)}}catch(i){o.e(i)}finally{o.f()}return!(""!==e&&""!==t&&""!==a&&""!==n&&!c)&&(alert("All fields must be filled."),!0)},r.validateFields=function(){var e=Object(S.cloneDeep)(r.state),t=e.id,a=e.name,n=e.species,s=e.type,c=e.constants;if(r.checkForEmptyFields(t,a,n,s,c))return!1;var o=r.capitalizeFields(a,n,c);return{id:t,name:o.nameCap,species:o.speciesCap,type:s,constants:o.constantsCap}},r.handleSubmit=function(){var e=Object(k.a)(E.a.mark((function e(t,a){var n,s,c,o,l,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!1!==r.validateFields()){e.next=3;break}return e.abrupt("return");case 3:if(n=r.validateFields(),s=n.id,c=n.name,o=n.species,l=n.type,i=n.constants,"update"!==a){e.next=9;break}return e.next=7,y.a.updateKitById(s,{name:c,species:o,type:l,constants:i});case 7:e.next=11;break;case 9:return e.next=11,y.a.createKit({id:s,name:c,species:o,type:l,constants:i});case 11:return"update"===a&&(r.props.updateTableKitData(s),r.props.history.goBack()),e.next=14,r.clearStateAndStorage();case 14:return alert("update"===a?"Kit updated in database!":"New kit added to database!"),e.next=17,r.props.fetchKitsFromDatabase();case 17:return e.next=19,r.props.selectSpecies(r.props.currentSpecies);case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.clearStateAndStorage=function(){localStorage.removeItem(r.props.match.params.kitID?"updateState":"createState"),r.setState({id:"",name:"",species:"",type:"",constants:[[null,null,null]]})},r.modifyConstantRows=function(){var e=Object(k.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=5;break}return e.next=3,r.setState({constants:[].concat(Object(g.a)(r.state.constants),[[null,null,null]])});case 3:e.next=8;break;case 5:if("subtract"!==t){e.next=8;break}return e.next=8,r.setState({constants:r.state.constants.slice(0,-1)});case 8:r.updateLocalStorage(r.props.match.params.kitID?"update":"create");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.deleteKit=function(){var e=Object(k.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.clearStateAndStorage(),e.next=3,y.a.deleteKitById(t);case 3:return e.next=5,r.props.fetchKitsFromDatabase();case 5:return e.next=7,r.props.selectSpecies(r.props.currentSpecies);case 7:r.props.history.goBack(),console.log("Kit deleted from database.");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.createArrayOfNonRepeatingElements=function(e,t){var a,n=new Set,r=Object(f.a)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value;n.add(s[t])}}catch(c){r.e(c)}finally{r.f()}return Array.from(n).sort()},r.state={id:"",name:"",species:"",type:"",constants:[[null,null,null]],duplicateID:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"page"},l.a.createElement("header",null,l.a.createElement("h3",{className:"page-title"},this.props.match.params.kitID?l.a.createElement(l.a.Fragment,null,"Edit Kit (",l.a.createElement("a",{href:"https://www.miltenyibiotec.com/US-en/search.html?search=".concat(this.props.match.params.kitID,"&options=on#globalSearchFamilies=%5B%5D"),target:"_blank",rel:"noopener noreferrer"},this.props.match.params.kitID),")"):"Create Kit")),l.a.createElement("div",{className:"create-body"},l.a.createElement("div",null,"All fields required."),l.a.createElement("form",{className:"create-form",autoComplete:"off",onSubmit:function(t){e.handleSubmit(t,e.props.match.params.kitID?"update":"create")}},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{align:"right"},"ID:"),l.a.createElement("td",{align:"left",colSpan:2},l.a.createElement("input",{type:"text",value:this.state.id,disabled:!!this.props.match.params.kitID,name:"id",placeholder:"000-000-000",onChange:this.handleInput,onBlur:this.checkID,className:this.state.duplicateID&&!this.props.match.params.kitID?"error":""}))),l.a.createElement("tr",null,l.a.createElement("td",{align:"right"},"Name:"),l.a.createElement("td",{align:"left",colSpan:2},l.a.createElement("input",{type:"text",value:this.state.name,name:"name",placeholder:"CD000 Isolation Kit",onChange:this.handleInput}))),l.a.createElement("tr",null,l.a.createElement("td",{align:"right"},"Species:"),l.a.createElement("td",{align:"left",colSpan:2},l.a.createElement("input",{type:"text",list:"species-choices",name:"species",onChange:this.handleInput,value:this.state.species,placeholder:this.state.species?"":"Unicorn"}),l.a.createElement("datalist",{id:"species-choices"},this.props.allSpecies.map((function(e){return l.a.createElement("option",{key:e},e)}))))),l.a.createElement("tr",null,l.a.createElement("td",{align:"right"},"Type:"),l.a.createElement("td",{align:"left",colSpan:2},l.a.createElement("select",{name:"type",value:"Positive"===this.state.type?"Positive":"Negative"===this.state.type?"Negative":"Select one:",onChange:this.handleInput},l.a.createElement("option",{hidden:!0},"Select one:"),l.a.createElement("option",{value:"Positive"},"Positive"),l.a.createElement("option",{value:"Negative"},"Negative")))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},"Constants")),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},"Be sure to include units.")),l.a.createElement("tr",null,l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Units"),l.a.createElement("td",null,"Constant")),this.state.constants.map((function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",{align:"right"},l.a.createElement("input",{type:"text",list:"constants-names",onChange:function(t){e.handleInput(t,a,"constantName")},value:t[0]||"",placeholder:t[0]?"":"Reagent"}),l.a.createElement("datalist",{id:"constants-names"},e.createArrayOfNonRepeatingElements(e.props.allConstantNames,0).map((function(e){return l.a.createElement("option",{key:e},e)})))),l.a.createElement("td",null,l.a.createElement("input",{type:"text",list:"units",onChange:function(t){e.handleInput(t,a,"constantUnit")},value:t[1]||"",placeholder:t[1]?"":"(unit)"}),l.a.createElement("datalist",{id:"units"},e.createArrayOfNonRepeatingElements(e.props.allConstantNames,1).map((function(e){return l.a.createElement("option",{key:e},e)})))),l.a.createElement("td",{align:"left"},l.a.createElement("input",{type:"text",onChange:function(t){e.handleInput(t,a,"constantValue")},value:t[2]||"",placeholder:t[2]?"":"000"})))})))),l.a.createElement("div",{className:"create-add-subtract-container"},l.a.createElement("button",{className:"create-row-button add-row-button",type:"button",onClick:function(){return e.modifyConstantRows("add")}},"Add Row"),l.a.createElement("button",{className:"create-row-button subtract-row-button",type:"button",onClick:function(){return e.modifyConstantRows("subtract")}},"Subtract Row")),l.a.createElement("button",{type:"button",onClick:this.clearStateAndStorage},"Clear All"),l.a.createElement("input",{type:"submit",value:this.props.match.params.kitID?"Update Kit":"Create Kit"}),this.props.match.params.kitID?l.a.createElement("button",{type:"button",onClick:function(){window.confirm("Confirm permanently deleting this kit from the database?")&&e.deleteKit(e.state.id)}},"Delete Kit"):null)),l.a.createElement("footer",null,l.a.createElement("button",{className:"nav-button",onClick:function(){e.props.history.goBack()}},"Back"),l.a.createElement(p,{to:"/",className:"nav-button home-button"},"Home"),l.a.createElement(p,{to:"/table",className:"nav-button table-button"},"Table (",this.props.rowCount," Samples)")))}}]),a}(o.Component)),w=function(e){var t=e.component,a=e.path,n=e.loggedIn,r=Object(i.a)(e,["component","path","loggedIn"]);return l.a.createElement(u.b,{path:a,render:function(e){return n?l.a.createElement(t,Object.assign({},e,r)):l.a.createElement(u.a,{to:"/error"})}})},C=(a(78),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(h.a)({},e.target.name,e.target.value))},r.handleSubmit=function(){var e=Object(k.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"login"!==a){e.next=11;break}if(!r.props.loggedIn){e.next=6;break}return e.abrupt("return",r.setState({password:"",passwordPlaceholder:"Already logged in!"}));case 6:if(""!==r.state.password){e.next=8;break}return e.abrupt("return",r.setState({passwordPlaceholder:"Password needed!"}));case 8:y.a.logIn({username:r.state.username,password:r.state.password}).then((function(e){200===e.status&&(r.props.setLoggedInStatus(!0),r.setState({password:"",passwordPlaceholder:""}))})).catch((function(e){console.log("Login error:",e),r.setState({password:"",passwordPlaceholder:"Wrong password!"})})),e.next=12;break;case 11:"logout"===a&&y.a.logOut().then((function(e){200===e.status&&r.props.setLoggedInStatus(!1)})).catch((function(e){console.log("login error: "),console.log(e)}));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.state={username:"admin",password:"",passwordPlaceholder:""},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("input",{onChange:this.handleChange,name:"password",autoComplete:"off",value:this.state.password,placeholder:this.state.passwordPlaceholder}),l.a.createElement("button",{className:"nav-button",onClick:function(t){e.handleSubmit(t,"login")}},"Log In"),l.a.createElement("button",{className:"nav-button",onClick:function(t){e.handleSubmit(t,"logout")}},"Log Out"),l.a.createElement("div",null,this.props.loggedIn?"Full Access Mode":"Visitor Mode"))}}]),a}(o.Component)),D=(a(79),function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"You are not logged in."),l.a.createElement("button",{className:"nav-button",onClick:function(){e.history.goBack()}},"Back"))})},42:function(e,t,a){"use strict";(function(e){var n=a(19),r=a(11),s=a(1),c=a.n(s),o=a(2),l=a(7),i=a(8),u=a(13),p=a(9),d=a(10),m=a(0),b=a.n(m),f=a(23),h=a(6),g=a(17),v=a(16),E=a(14),k=(a(80),a(28),function(t){Object(d.a)(s,t);var a=Object(p.a)(s);function s(){var t;return Object(l.a)(this,s),(t=a.call(this)).componentDidMount=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.fetchLocalStorage(),e.next=3,t.fetchKitsFromDatabase();case 3:t.getUser();case 4:case"end":return e.stop()}}),e)}))),t.getUser=function(){E.a.checkLoginStatus().then((function(e){e.data.user?(console.log("Existing session; logged in."),t.setState({loggedIn:!0})):(console.log("No existing session."),t.setState({loggedIn:!1}))}))},t.setLoggedInStatus=function(e){t.setState({loggedIn:e})},t.fetchLocalStorage=Object(o.a)(c.a.mark((function a(){var n,r,s,o,l,i,u,p,d;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("Fetching state from local storage..."),console.log("port",e.port),!(n=JSON.parse(localStorage.getItem("appState")))){a.next=7;break}return r=n.rowCount,s=n.currentSpecies,o=n.currentPosKits,l=n.currentNegKits,i=n.tableKitIDs,u=n.tableKitData,p=n.arrayedKitData,d=n.tableRowsHash,a.next=7,t.setState({rowCount:r,currentSpecies:s,currentPosKits:o,currentNegKits:l,tableKitIDs:i,tableKitData:u,arrayedKitData:p,tableRowsHash:d});case 7:console.log("State loaded.");case 8:case"end":return a.stop()}}),a)}))),t.fetchKitsFromDatabase=Object(o.a)(c.a.mark((function e(){var a,n,s,o,l,i,u,p,d,m,b,f,h,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching kits from database..."),e.next=3,E.a.getAllKits();case 3:a=e.sent,n=a.data.data,s=[],o=Object(r.a)(n);try{for(o.s();!(l=o.n()).done;)i=l.value,u=i.id,p=i.name,d=i.species,m=i.type,b=i.constants,s.push({id:u,name:p,species:d,type:m,constants:b})}catch(c){o.e(c)}finally{o.f()}return f=t.extractAllSpecies(s).sort(),h=t.createKitIDHash(s),g=t.extractConstantNames(s),e.next=13,t.setState({allKits:s,allConstantNames:g,allSpecies:f,allKitIDs:h});case 13:console.log("All kits loaded.");case 14:case"end":return e.stop()}}),e)}))),t.createKitIDHash=function(e){var t,a=new Set,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value;a.add(s.id)}}catch(c){n.e(c)}finally{n.f()}return a},t.extractConstantNames=function(e){var t,a=[],s=Object(r.a)(e);try{for(s.s();!(t=s.n()).done;){var c=t.value;a.push.apply(a,Object(n.a)(c.constants))}}catch(p){s.e(p)}finally{s.f()}for(var o=new Set,l=0,i=a;l<i.length;l++){var u=i[l];o.add(u[0])}return Array.from(o).sort().map((function(e){var t=e.split(" (");return t[1]="(".concat(t[1]),t}))},t.extractAllSpecies=function(e){var t,a=new Set,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value;a.add(s.species)}}catch(c){n.e(c)}finally{n.f()}return Array.from(a)},t.updateLocalStorage=function(){localStorage.setItem("appState",JSON.stringify(t.state))},t.modifyRowCount=function(e){"add"===e?t.setState({rowCount:t.state.rowCount+1}):"subtract"===e&&t.setState({rowCount:t.state.rowCount-1})},t.selectSpecies=function(){var e=Object(o.a)(c.a.mark((function e(a){var n,r,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.allKits.filter((function(e){return e.species===a})),r=t.sortKits(n),s=r.currentPosKits,o=r.currentNegKits,e.next=4,t.setState({currentSpecies:a,currentPosKits:s,currentNegKits:o});case 4:t.updateLocalStorage();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sortKits=function(e){var t,a=[],n=[],s=Object(r.a)(e);try{for(s.s();!(t=s.n()).done;){var c=t.value;"Positive"===c.type?a.push(c):"Negative"===c.type&&n.push(c)}}catch(o){s.e(o)}finally{s.f()}return{currentPosKits:a,currentNegKits:n}},t.updateTable=function(){var e=Object(o.a)(c.a.mark((function e(a,n){var r,s,o,l,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.assign({},t.state.tableKitIDs),"add"!==a){e.next=17;break}return r[n.id]=(r[n.id]||0)+1,s=r[n.id],o=n.id+" "+s,e.next=7,t.modifyTableRowsHash(a,n.species,o);case 7:return e.next=9,t.modifyRowCount(a);case 9:return e.next=11,t.setState({tableKitIDs:r});case 11:if(1!==r[n.id]){e.next=14;break}return e.next=14,t.addKitData(n.id);case 14:console.log("App state after ADD:",t.state),e.next=32;break;case 17:if("subtract"!==a){e.next=32;break}if(!r[n.id]){e.next=28;break}return l=r[n.id],i=n.id+" "+l,--r[n.id],e.next=24,t.setState({tableKitIDs:r});case 24:return e.next=26,t.modifyTableRowsHash(a,n.species,i);case 26:return e.next=28,t.modifyRowCount(a);case 28:if(r[n.id]){e.next=31;break}return e.next=31,t.removeKitData(n.id);case 31:console.log("App state after REMOVE:",t.state);case 32:t.updateLocalStorage();case 33:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.addKitData=function(){var e=Object(o.a)(c.a.mark((function e(a){var s,o,l,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Object(r.a)(t.state.allKits),e.prev=1,s.s();case 3:if((o=s.n()).done){e.next=13;break}if((l=o.value).id!==a){e.next=11;break}return i=[].concat(Object(n.a)(t.state.tableKitData),[l]),u=t.hashifyKitData(i),e.next=10,t.setState({tableKitData:i,arrayedKitData:u});case 10:return e.abrupt("return");case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),s.e(e.t0);case 18:return e.prev=18,s.f(),e.finish(18);case 21:return console.log("Kit not found in allKits."),e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),t.removeKitData=function(e){var a=t.state.tableKitData.filter((function(t){return t.id!==e})),n=t.hashifyKitData(a);t.setState({tableKitData:a,arrayedKitData:n})},t.updateTableKitData=function(e){var a,n={},s=Object(r.a)(t.state.allKits);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.id===e){n=c;break}}}catch(u){s.e(u)}finally{s.f()}for(var o=Object(g.cloneDeep)(t.state.tableKitData),l=0;l<o.length;l++)o[l].id===e&&(o[l]=n);var i=t.hashifyKitData(o);t.setState({tableKitData:o,arrayedKitData:i})},t.hashifyKitData=function(e){var a,n={},s=Object(r.a)(e);try{for(s.s();!(a=s.n()).done;){var c=a.value;n[c.species]=(n[c.species]||[]).concat(c)}}catch(o){s.e(o)}finally{s.f()}return t.arrayifyKitData(n)},t.arrayifyKitData=function(e){var t=[];for(var a in e){var n=[a,e[a]];t.push(n)}return t},t.modifyTableRowsHash=function(){var e=Object(o.a)(c.a.mark((function e(a,n,r){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(g.cloneDeep)(t.state.tableRowsHash),"add"===a?(s[n]||(s[n]={}),s[n][r]=[void 0,void 0]):"subtract"===a&&delete s[n][r],e.next=4,t.setState({tableRowsHash:s});case 4:t.updateLocalStorage();case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),t.updateRowCellCount=function(){var e=Object(o.a)(c.a.mark((function e(a,n,r,s){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(g.cloneDeep)(t.state.tableRowsHash),"cellCount"===a?o[n][r][1]=s:"sampleID"===a&&(o[n][r][0]=s),e.next=4,t.setState({tableRowsHash:o});case 4:t.updateLocalStorage();case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),t.deleteSpeciesFromTable=function(){var e=Object(o.a)(c.a.mark((function e(a){var n,r,s,o,l,i,u,p,d,m,b,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=Object(g.cloneDeep)(t.state),r=n.rowCount,s=n.tableKitIDs,o=n.tableKitData,l=n.arrayedKitData,i=n.tableRowsHash,u=i[a],p=Object.keys(u).length,r-=p,delete i[a],d=[],o=o.filter((function(e){return e.species!==a||(d.push(e.id),!1)})),m=0,b=d;m<b.length;m++)f=b[m],delete s[f];return l=l.filter((function(e){return e[0]!==a})),e.next=12,t.setState({rowCount:r,tableKitIDs:s,tableKitData:o,arrayedKitData:l,tableRowsHash:i});case 12:t.updateLocalStorage();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.deleteKitFromTable=function(){var e=Object(o.a)(c.a.mark((function e(a,n){var r,s,o,l,i,u,p,d,m,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(d in r=Object(g.cloneDeep)(t.state),s=r.rowCount,o=r.tableKitIDs,l=r.tableKitData,i=r.tableRowsHash,u=0,p=i[n])d.slice(0,-2)===a&&(++u,delete p[d]);for(m in s-=u,o)m===a&&delete o[m];return l=l.filter((function(e){return e.id!==a})),b=t.hashifyKitData(l),e.next=11,t.setState({rowCount:s,tableKitIDs:o,tableKitData:l,arrayedKitData:b,tableRowsHash:i});case 11:t.updateLocalStorage();case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.clearTable=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({rowCount:0,tableKitIDs:{},tableKitData:[],arrayedKitData:[],tableRowsHash:{}});case 2:t.updateLocalStorage();case 3:case"end":return e.stop()}}),e)}))),t.state={loggedIn:!1,allKits:[],allConstantNames:[],rowCount:0,currentSpecies:"No Species Selected",currentPosKits:[],currentNegKits:[],tableKitIDs:{},tableKitData:[],arrayedKitData:[],tableRowsHash:{},allSpecies:[],allKitIDs:{}},t.selectSpecies=t.selectSpecies.bind(Object(u.a)(t)),t.updateTable=t.updateTable.bind(Object(u.a)(t)),t.clearTable=t.clearTable.bind(Object(u.a)(t)),t.deleteSpeciesFromTable=t.deleteSpeciesFromTable.bind(Object(u.a)(t)),t.deleteKitFromTable=t.deleteKitFromTable.bind(Object(u.a)(t)),t.fetchKitsFromDatabase=t.fetchKitsFromDatabase.bind(Object(u.a)(t)),t.updateTableKitData=t.updateTableKitData.bind(Object(u.a)(t)),t.setLoggedInStatus=t.setLoggedInStatus.bind(Object(u.a)(t)),t}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return b.a.createElement(f.a,{className:"main"},b.a.createElement(v.e,{loggedIn:this.state.loggedIn,setLoggedInStatus:this.setLoggedInStatus}),b.a.createElement(h.d,null,b.a.createElement(h.b,{path:"/kits",render:function(t){return b.a.createElement(v.d,Object.assign({},t,{loggedIn:e.state.loggedIn,currentSpecies:e.state.currentSpecies,currentPosKits:e.state.currentPosKits,currentNegKits:e.state.currentNegKits,rowCount:e.state.rowCount,tableKitIDs:e.state.tableKitIDs,updateTable:e.updateTable}))}}),b.a.createElement(v.f,{path:"/edit/:kitID",component:v.a,loggedIn:this.state.loggedIn,allConstantNames:this.state.allConstantNames,rowCount:this.state.rowCount,allKitIDs:this.state.allKitIDs,currentSpecies:this.state.currentSpecies,allSpecies:this.state.allSpecies,fetchKitsFromDatabase:this.fetchKitsFromDatabase,selectSpecies:this.selectSpecies,updateTableKitData:this.updateTableKitData}),b.a.createElement(v.f,{path:"/create",component:v.a,loggedIn:this.state.loggedIn,allConstantNames:this.state.allConstantNames,allKits:this.allKits,rowCount:this.state.rowCount,allKitIDs:this.state.allKitIDs,currentSpecies:this.state.currentSpecies,allSpecies:this.state.allSpecies,fetchKitsFromDatabase:this.fetchKitsFromDatabase,selectSpecies:this.selectSpecies}),b.a.createElement(h.b,{path:"/table",render:function(t){return b.a.createElement(v.g,Object.assign({},t,{loggedIn:e.state.loggedIn,tableKitIDs:e.state.tableKitIDs,tableKitData:e.state.tableKitData,arrayedKitData:e.state.arrayedKitData,tableRowsHash:e.state.tableRowsHash,selectSpecies:e.selectSpecies,updateTable:e.updateTable,updateRowCellCount:e.updateRowCellCount,deleteSpeciesFromTable:e.deleteSpeciesFromTable,deleteKitFromTable:e.deleteKitFromTable,clearTable:e.clearTable}))}}),b.a.createElement(h.b,{path:"/",exact:!0,render:function(t){return b.a.createElement(v.c,Object.assign({},t,{rowCount:e.state.rowCount,allSpecies:e.state.allSpecies,selectSpecies:e.selectSpecies}))}}),b.a.createElement(h.b,{path:"/error",render:function(e){return b.a.createElement(v.b,e)}})))}}]),s}(m.Component));t.a=k}).call(this,a(22))},45:function(e,t,a){e.exports=a(81)},50:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(41),c=a.n(s),o=(a(50),a(42));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.bc206755.chunk.js.map