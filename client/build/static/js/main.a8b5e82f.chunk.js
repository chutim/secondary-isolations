(this["webpackJsonpsecondary-isolations"]=this["webpackJsonpsecondary-isolations"]||[]).push([[0],{42:function(e,t,a){e.exports=a(78)},47:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(38),c=a.n(s),o=(a(47),a(19)),i=a(12),l=a(1),u=a.n(l),p=a(2),m=a(6),d=a(7),b=a(11),f=a(8),h=a(9),g=a(20),v=a(15),k=a(13),E=a(23),S=Object(v.f)((function(e){var t=e.history,a=(e.location,e.match,e.staticContext,e.to),n=e.onClick,s=e.kit,c=Object(E.a)(e,["history","location","match","staticContext","to","onClick","kit"]);return r.a.createElement("button",Object.assign({},c,{onClick:function(e){n&&n(e),t.push(a,s)}}))})),y=(a(54),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"page"},r.a.createElement("header",null,r.a.createElement("div",{className:"page-title",id:"home-title"},"Secondary Isolation Calculator"),r.a.createElement("div",{className:"home-subtitle"},"For"," ",r.a.createElement("a",{className:"miltenyi-link",href:"https://www.miltenyibiotec.com/US-en/",target:"_blank",rel:"noopener noreferrer"},"Miltenyi Biotec")," ","Kits")),r.a.createElement("div",{className:"home-container-species-buttons scrollable-body"},this.props.allSpecies.map((function(t){return r.a.createElement(S,{to:"/kits",className:"species-button",onClick:function(){return e.props.selectSpecies(t)},key:t},t)}))),r.a.createElement("footer",null,r.a.createElement(S,{to:"/table",className:"nav-button table-button"},"Table (",this.props.rowCount," ",1===this.props.rowCount?"Sample":"Samples",")")))}}]),a}(n.Component)),w=(a(55),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).sortKitsByName=function(e){return e.sort((function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase();return a<n?-1:a>n?1:0}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"page"},r.a.createElement("header",null,r.a.createElement("div",{className:"page-title"},this.props.currentSpecies," Kits")),r.a.createElement("div",{className:"kits-body scrollable-body"},r.a.createElement("div",{className:"kit-section section-positive-selection"},r.a.createElement("div",{className:"kit-section-title"},"Positive Selection"),r.a.createElement("div",{className:"kit-section-list"},this.props.currentPosKits&&this.sortKitsByName(this.props.currentPosKits).map((function(t){return r.a.createElement("div",{className:"kit-info-container",key:t.id},r.a.createElement("div",{className:"kit-name-container"},r.a.createElement("div",{className:"kit-name"},t.name),r.a.createElement("div",null,r.a.createElement("a",{className:"kit-id",href:"https://www.miltenyibiotec.com/US-en/search.html?search=".concat(t.id,"&options=on#globalSearchFamilies=%5B%5D"),target:"_blank",rel:"noopener noreferrer"},t.id))),r.a.createElement("div",{className:"kit-info-container-right"},r.a.createElement(S,{to:"/edit/".concat(t.id),className:e.props.loggedIn?"edit-button":"edit-button logged-out-edit-button",kit:t},r.a.createElement("i",{class:"fas fa-pen"})),r.a.createElement("div",{className:"kit-options-row"},r.a.createElement("button",{className:"kit-options-button kit-remove-button subtract-button",onClick:function(){e.props.updateTable("subtract",t)}},"-"),r.a.createElement("div",{className:"kit-count"},e.props.tableKitIDs[t.id]||0),r.a.createElement("button",{className:"kit-options-button kit-add-button add-button",onClick:function(){e.props.updateTable("add",t)}},"+"))))})))),r.a.createElement("div",{className:"kit-section section-negative-selection"},r.a.createElement("div",{className:"kit-section-title"},"Negative Selection"),r.a.createElement("div",{className:"kit-section-list"},this.props.currentNegKits&&this.sortKitsByName(this.props.currentNegKits).map((function(t){return r.a.createElement("div",{className:"kit-info-container",key:t.id},r.a.createElement("div",{className:"kit-name-container"},r.a.createElement("div",{className:"kit-name"},t.name),r.a.createElement("div",null,r.a.createElement("a",{className:"kit-id",href:"https://www.miltenyibiotec.com/US-en/search.html?search=".concat(t.id,"&options=on#globalSearchFamilies=%5B%5D"),target:"_blank",rel:"noopener noreferrer"},t.id))),r.a.createElement("div",{className:"kit-info-container-right"},r.a.createElement(S,{to:"/edit/".concat(t.id),className:e.props.loggedIn?"edit-button":"edit-button logged-out-edit-button",kit:t},r.a.createElement("i",{class:"fas fa-pen"})),r.a.createElement("div",{className:"kit-options-row"},r.a.createElement("button",{className:"kit-options-button kit-remove-button subtract-button",onClick:function(){e.props.updateTable("subtract",t)}},"-"),r.a.createElement("div",{className:"kit-count"},e.props.tableKitIDs[t.id]||0),r.a.createElement("button",{className:"kit-options-button kit-add-button add-button",onClick:function(){e.props.updateTable("add",t)}},"+"))))}))))),r.a.createElement("footer",null,r.a.createElement("button",{className:"nav-button back-button",onClick:function(){e.props.history.goBack()}},"Back"),r.a.createElement(S,{to:"/",className:"nav-button home-button"},"Home"),r.a.createElement(S,{to:"/create",id:this.props.loggedIn?"create-button-faded-in":"create-button-faded-out"},"Create Kit"),r.a.createElement(S,{to:"/table",className:"nav-button table-button"},"Table (",this.props.rowCount," ",1===this.props.rowCount?"Sample":"Samples",")")))}}]),a}(n.Component)),N=(a(56),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).generateRows=function(t){for(var a=e.props.tableKitIDs[t.id],n=1,s=[],c=function(){var a=n,c=t.id+" "+a;s.push(r.a.createElement("tr",{className:"table-variables-row",key:a},r.a.createElement("td",{className:"medium-cell"},r.a.createElement("input",{className:"user-input medium-cell",onChange:function(a){return e.props.updateRowCellCount("sampleID",t.species,c,a.target.value)},value:e.props.tableRowsHash[t.species][c][0]||""})),r.a.createElement("td",{className:"short-cell"},r.a.createElement("input",{className:"user-input short-cell",onKeyPress:function(e){(e.charCode<48&&46!==e.charCode||e.charCode>57)&&e.preventDefault()},onChange:function(a){return e.props.updateRowCellCount("cellCount",t.species,c,a.target.value)},value:e.props.tableRowsHash[t.species][c][1]||""})),t.constants.map((function(a,n){if(a[1].includes("min")||a[1].includes("times x mL")||a[1].includes("g x min"))return r.a.createElement("td",{key:n},a[2]);var s=Number(a[2])*e.props.tableRowsHash[t.species][c][1]/10;return r.a.createElement("td",{key:n},s?s.toLocaleString("en",{useGrouping:!0}):"")})))),++n};n<=a;)c();return s},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"scrollable-body",id:"divToPrint"},this.props.arrayedKitData.map((function(t){return r.a.createElement("div",{className:"tables-container",key:t[0]},r.a.createElement("div",{className:"tables-header"},r.a.createElement("div",{className:"tables-header-spacer"}),r.a.createElement(S,{to:"/kits",className:"species-name",onClick:function(){return e.props.selectSpecies(t[0])},key:t[0]},t[0]),r.a.createElement("button",{className:"delete-button delete-species no-print-spacer",onClick:function(){return e.props.deleteSpeciesFromTable(t[0])}},r.a.createElement("i",{class:"fas fa-trash-alt"}))),t[1].map((function(t){return r.a.createElement("table",{className:"kit-table",key:t.id},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"kit-table-header-container",colSpan:t.constants.length+2},r.a.createElement("div",{className:"kit-table-header"},r.a.createElement(S,{to:"/edit/".concat(t.id),className:e.props.loggedIn?"edit-button no-print-spacer":"edit-button logged-out-edit-button",kit:t},r.a.createElement("i",{class:"fas fa-pen"})),r.a.createElement("div",{className:"kit-table-header-text-container"},r.a.createElement("div",{className:"kit-table-header-name"},t.name,":"," ",r.a.createElement("a",{className:"kit-table-header-id",href:"https://www.miltenyibiotec.com/US-en/search.html?search=".concat(t.id,"&options=on#globalSearchFamilies=%5B%5D"),target:"_blank",rel:"noopener noreferrer"},t.id)),r.a.createElement("div",{className:"kit-table-header-selection"},"(",t.type," Selection)")),r.a.createElement("button",{className:"delete-button delete-kit no-print-spacer",onClick:function(){return e.props.deleteKitFromTable(t.id,t.species)}},r.a.createElement("i",{class:"fas fa-trash-alt"}))))),r.a.createElement("tr",{className:"kit-multipliers-row no-print"},r.a.createElement("th",{className:"kit-constants-title",colSpan:2},"Constants:"),t.constants.map((function(e,t){return r.a.createElement("th",{key:t},e[2])}))),r.a.createElement("tr",{className:"kit-constant-names-row"},r.a.createElement("th",{className:"medium-cell"},"Sample ID"),r.a.createElement("th",{className:"short-cell superscript-cell"},"Cell Count (10",r.a.createElement("sup",null,"6"),")"),t.constants.map((function(e,t){return r.a.createElement("th",{key:t},e[0]+" ("+e[1]+")")})))),r.a.createElement("tbody",null,e.generateRows(t)),r.a.createElement("tfoot",{className:"no-print"},r.a.createElement("tr",null,r.a.createElement("td",{colSpan:t.constants.length+2},r.a.createElement("div",{className:"kit-table-footer"},r.a.createElement("button",{className:"kit-table-row-button add-button",onClick:function(){return e.props.updateTable("add",t)}},"Add Row"),r.a.createElement("button",{className:"kit-table-row-button subtract-button",onClick:function(){return e.props.updateTable("subtract",t)}},"Remove Row"))))))})))}))),r.a.createElement("footer",null,r.a.createElement("button",{className:"nav-button back-button",onClick:function(){e.props.history.goBack()}},"Back"),r.a.createElement(S,{to:"/",className:"nav-button home-button"},"Home"),r.a.createElement("button",{className:"nav-button clear-table-button",onClick:function(){e.props.clearTable()}},"Clear Table"),r.a.createElement("button",{className:"nav-button print-button",onClick:function(){window.print()}},"Print")))}}]),a}(n.Component)),K=a(22),D=a(41),C=a.n(D),I="development"==="production".trim()?"http://localhost:8000":void 0,x=C.a.create({withCredentials:!0,baseURL:I}),O={createKit:function(e){return x.post("/api/kit",e)},updateKitById:function(e,t){return x.put("/api/kit/".concat(e),t)},deleteKitById:function(e){return x.delete("/api/kit/".concat(e))},getAllKits:function(){return x.get("/api/kits")},logIn:function(e){return x.post("/api/login",e)},checkLoginStatus:function(){return x.get("/api/login")},logOut:function(){return x.post("/api/logout")}},j=(a(74),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(p.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.match.params.kitID){e.next=14;break}if(!n.props.location.state){e.next=6;break}return e.next=4,n.setState(n.props.location.state);case 4:e.next=11;break;case 6:return console.log("Fetching saved update kit data..."),t=JSON.parse(localStorage.getItem("updateState")),e.next=10,n.setState(t);case 10:console.log("Saved update kit data loaded.");case 11:n.updateLocalStorage("update"),e.next=19;break;case 14:return console.log("Fetching saved create kit data..."),a=JSON.parse(localStorage.getItem("createState")),e.next=18,n.setState(a);case 18:console.log("Saved create kit data loaded.");case 19:case"end":return e.stop()}}),e)}))),n.updateLocalStorage=function(e){"create"===e?localStorage.setItem("createState",JSON.stringify(n.state)):"update"===e&&localStorage.setItem("updateState",JSON.stringify(n.state))},n.handleInput=function(){var e=Object(p.a)(u.a.mark((function e(t,a,r){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(k.cloneDeep)(n.state.constants),!r){e.next=7;break}return"constantName"===r?s[a][0]=t.target.value:"constantUnit"===r?s[a][1]=t.target.value:"constantValue"===r&&(s[a][2]=t.target.value),e.next=5,n.setState({constants:s});case 5:e.next=10;break;case 7:return e.next=9,n.setState(Object(K.a)({},t.target.name,t.target.value));case 9:n.props.allKitIDs.has(n.state.id)?n.setState({duplicateID:!0}):n.setState({duplicateID:!1});case 10:n.updateLocalStorage(n.props.match.params.kitID?"update":"create");case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.checkID=function(){n.props.allKitIDs.has(n.state.id)&&alert("This kit ID is already in use.")},n.capitalizeWords=function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" ")},n.processFields=function(e,t,a){return{namePrepped:n.capitalizeWords(String(e).trim()),speciesPrepped:n.capitalizeWords(t.trim()),constantsPrepped:a.map((function(e){return(e=e.map((function(e){return e.trim()})))[0]=n.capitalizeWords(e[0]),e}))}},n.checkForEmptyFields=function(e,t,a,n,r){var s,c=!1,o=Object(i.a)(r);try{for(o.s();!(s=o.n()).done;){var l=s.value;l[0]&&l[1]&&l[2]||(c=!0)}}catch(u){o.e(u)}finally{o.f()}return!(""!==e&&""!==t&&""!==a&&""!==n&&!c)&&(alert("All fields must be filled."),!0)},n.validateFields=function(){var e=Object(k.cloneDeep)(n.state),t=e.id,a=e.name,r=e.species,s=e.type,c=e.constants;if(n.checkForEmptyFields(t,a,r,s,c))return!1;var o=n.processFields(a,r,c),i=o.namePrepped,l=o.speciesPrepped,u=o.constantsPrepped;return{id:String(t),name:i,species:l,type:s,constants:u}},n.handleSubmit=function(){var e=Object(p.a)(u.a.mark((function e(t,a){var r,s,c,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!1!==n.validateFields()){e.next=3;break}return e.abrupt("return");case 3:if(r=n.validateFields(),s=r.id,c=r.name,o=r.species,i=r.type,l=r.constants,"update"!==a){e.next=9;break}return e.next=7,O.updateKitById(s,{name:c,species:o,type:i,constants:l});case 7:e.next=11;break;case 9:return e.next=11,O.createKit({id:s,name:c,species:o,type:i,constants:l});case 11:return"update"===a&&(n.props.updateTableKitData({id:s,name:c,species:o,type:i,constants:l},"update"),n.props.history.goBack()),e.next=14,n.clearStateAndStorage();case 14:return alert("update"===a?"Kit updated in database!":"New kit added to database!"),e.next=17,n.props.fetchKitsFromDatabase();case 17:return e.next=19,n.props.selectSpecies(n.props.currentSpecies);case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.clearStateAndStorage=function(){localStorage.removeItem(n.props.match.params.kitID?"updateState":"createState"),n.setState({id:"",name:"",species:"",type:"",constants:[[null,null,null]]})},n.modifyConstantRows=function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=5;break}return e.next=3,n.setState({constants:[].concat(Object(o.a)(n.state.constants),[[null,null,null]])});case 3:e.next=8;break;case 5:if("subtract"!==t){e.next=8;break}return e.next=8,n.setState({constants:n.state.constants.slice(0,-1)});case 8:n.updateLocalStorage(n.props.match.params.kitID?"update":"create");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deleteKit=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,s,c,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(k.cloneDeep)(n.state),r=a.id,s=a.name,c=a.species,o=a.type,i=a.constants,n.clearStateAndStorage(),e.next=4,O.deleteKitById(t);case 4:return e.next=6,n.props.fetchKitsFromDatabase();case 6:return e.next=8,n.props.selectSpecies(n.props.currentSpecies);case 8:return e.next=10,n.props.updateTableKitData({id:r,name:s,species:c,type:o,constants:i},"delete");case 10:n.props.history.goBack(),console.log("Kit deleted from database.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createArrayOfNonRepeatingElements=function(e){var t,a=n.props.allKits.reduce((function(e,t){return e.push.apply(e,Object(o.a)(t.constants)),e}),[]),r=new Set,s=Object(i.a)(a);try{for(s.s();!(t=s.n()).done;){var c=t.value;r.add(c[e])}}catch(l){s.e(l)}finally{s.f()}return Array.from(r).sort()},n.state={id:"",name:"",species:"",type:"",constants:[[null,null,null]],duplicateID:!1},n.typeRef=r.a.createRef(),n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"page"},r.a.createElement("header",null,r.a.createElement("div",{className:"page-title"},this.props.match.params.kitID?r.a.createElement(r.a.Fragment,null,"Edit"," ",r.a.createElement("a",{className:"edit-kit-id",href:"https://www.miltenyibiotec.com/US-en/search.html?search=".concat(this.props.match.params.kitID,"&options=on#globalSearchFamilies=%5B%5D"),target:"_blank",rel:"noopener noreferrer"},this.props.match.params.kitID)):"Create Kit")),r.a.createElement("form",{className:"create-form",autoComplete:"off",onSubmit:function(t){e.handleSubmit(t,e.props.match.params.kitID?"update":"create")}},r.a.createElement("div",{className:"create-section-left"},r.a.createElement("table",{id:"create-edit-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"create-form-label",align:"right"},"ID"),r.a.createElement("td",{align:"left",colSpan:2},r.a.createElement("input",{type:"text",value:this.state.id,disabled:!!this.props.match.params.kitID,name:"id",placeholder:"000-000-000",onChange:this.handleInput,onBlur:this.checkID,className:this.state.duplicateID&&!this.props.match.params.kitID?"form-top-input error":"form-top-input"}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"create-form-label",align:"right"},"Name"),r.a.createElement("td",{align:"left",colSpan:2},r.a.createElement("input",{className:"form-top-input",type:"text",value:this.state.name,name:"name",placeholder:"CD000 Isolation Kit",onChange:this.handleInput}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"create-form-label",align:"right"},"Species"),r.a.createElement("td",{align:"left",colSpan:2},r.a.createElement("input",{className:"form-top-input",type:"text",list:"species-choices",name:"species",onChange:this.handleInput,value:this.state.species,placeholder:this.state.species?"":"Dragon"}),r.a.createElement("datalist",{id:"species-choices"},this.props.allSpecies.map((function(e){return r.a.createElement("option",{key:e},e)}))))),r.a.createElement("tr",null,r.a.createElement("td",{className:"create-form-label",align:"right"},"Selection"),r.a.createElement("td",{align:"left",colSpan:2},r.a.createElement("input",{className:"form-top-input select-type",type:"text",list:"type-choices",name:"type",onKeyDown:function(e){e.preventDefault()},ref:this.typeRef,onMouseDown:function(){e.typeRef.current.value="",e.setState({type:""})},onChange:this.handleInput,value:this.state.type,placeholder:this.state.type?"":"Select one:"}),r.a.createElement("datalist",{id:"type-choices"},r.a.createElement("option",{value:"Positive"},"Positive"),r.a.createElement("option",{value:"Negative"},"Negative")))),r.a.createElement("tr",null,r.a.createElement("td",{className:"constants-header",colSpan:3},"Constants")))),r.a.createElement("div",{className:"scrollable-body table-of-constants-container"},r.a.createElement("table",{className:"table-of-constants"},r.a.createElement("thead",{className:"toc-head"},r.a.createElement("tr",{className:"toc-header"},r.a.createElement("th",{className:"toc-name-col create-form-label"},"Name"),r.a.createElement("th",{className:"create-form-label"},"Units"),r.a.createElement("th",{className:"create-form-label"},"Constant"))),r.a.createElement("tbody",null,this.state.constants.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("input",{className:"form-bottom-input",type:"text",list:"constants-names",onChange:function(t){e.handleInput(t,a,"constantName")},value:t[0]||"",placeholder:t[0]?"":"Fireball Cocktail"}),r.a.createElement("datalist",{id:"constants-names"},e.createArrayOfNonRepeatingElements(0).map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("td",null,r.a.createElement("input",{className:"form-bottom-input",type:"text",list:"units",onChange:function(t){e.handleInput(t,a,"constantUnit")},value:t[1]||"",placeholder:t[1]?"":"cups"}),r.a.createElement("datalist",{id:"units"},e.createArrayOfNonRepeatingElements(1).map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("td",null,r.a.createElement("input",{className:"form-bottom-input",type:"text",onChange:function(t){e.handleInput(t,a,"constantValue")},value:t[2]||"",placeholder:t[2]?"":"000"})))}))))),r.a.createElement("div",{className:"create-add-subtract-container"},r.a.createElement("button",{className:"create-add-subtract-row-button create-add-button",type:"button",onClick:function(){return e.modifyConstantRows("add")}},"Add Row"),r.a.createElement("button",{className:"create-add-subtract-row-button create-subtract-button",type:"button",onClick:function(){return e.modifyConstantRows("subtract")}},"Remove Row"))),r.a.createElement("div",{className:"create-section-right"},r.a.createElement("button",{className:"create-master-button create-clear-button",type:"button",onClick:this.clearStateAndStorage},"Clear All"),r.a.createElement("input",{className:"create-master-button create-create-update-button",type:"submit",value:this.props.match.params.kitID?"Update Kit":"Create Kit"}),this.props.match.params.kitID?r.a.createElement("button",{className:"create-master-button create-delete-button",type:"button",onClick:function(){window.confirm("Confirm permanently deleting this kit from the database?")&&e.deleteKit(e.state.id)}},"Delete Kit"):null)),r.a.createElement("footer",null,r.a.createElement("button",{className:"nav-button back-button",onClick:function(){e.props.history.goBack()}},"Back"),r.a.createElement(S,{to:"/",className:"nav-button home-button"},"Home"),r.a.createElement(S,{to:"/table",className:"nav-button table-button"},"Table (",this.props.rowCount," ",1===this.props.rowCount?"Sample":"Samples",")")))}}]),a}(n.Component)),T=(a(75),function(e){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"error-container"},r.a.createElement("div",{className:"lock-icon"},r.a.createElement("div",{className:"lock-loop"}),r.a.createElement("div",{className:"lock-body"},r.a.createElement("div",{className:"lock-hole-top"}),r.a.createElement("div",{className:"lock-hole-bottom"}))),r.a.createElement("div",{className:"error-text"},"Please log in for full site access.")),r.a.createElement("footer",null,r.a.createElement("button",{className:"nav-button back-button",onClick:function(){e.history.goBack()}},"Back"),r.a.createElement(S,{to:"/",className:"nav-button home-button"},"Home"),r.a.createElement(S,{to:"/table",className:"nav-button table-button"},"Table (",e.rowCount," ",1===e.rowCount?"Sample":"Samples",")")))}),R=function(e){var t=e.component,a=e.path,n=e.loggedIn,s=Object(E.a)(e,["component","path","loggedIn"]);return r.a.createElement(v.a,{path:a,render:function(e){return n?r.a.createElement(t,Object.assign({},e,s)):r.a.createElement(T,Object.assign({},e,s))}})},F=(a(76),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){var e=Object(p.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"login"!==a){e.next=7;break}if(""!==n.state.password){e.next=4;break}return e.abrupt("return",n.setState({passwordPlaceholder:"Please type a password"}));case 4:O.logIn({username:n.state.username,password:n.state.password}).then((function(e){200===e.status&&(n.props.setLoggedInStatus(!0),n.setState({password:"",passwordPlaceholder:""}))})).catch((function(e){console.log("Login error:",e),n.setState({password:"",passwordPlaceholder:"Wrong password"})})),e.next=8;break;case 7:"logout"===a&&O.logOut().then((function(e){200===e.status&&n.props.setLoggedInStatus(!1)})).catch((function(e){console.log("login error: "),console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={username:"admin",password:"",passwordPlaceholder:""},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-mode"},this.props.loggedIn?"Full Access":"Visitor"),r.a.createElement("div",{className:"login-input-container"},r.a.createElement("input",{className:"login-input",onChange:this.handleChange,name:"password",autoComplete:"off",value:this.state.password,placeholder:this.state.passwordPlaceholder}),r.a.createElement("button",{className:this.props.loggedIn?"login-button logged-in-button":"login-button logged-out-button",onClick:function(t){e.handleSubmit(t,e.props.loggedIn?"logout":"login")}},this.props.loggedIn?"Log Out":"Log In")))}}]),a}(n.Component)),L=(a(77),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).componentDidMount=Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchLocalStorage(),e.fetchKitsFromDatabase(),e.getUser();case 3:case"end":return t.stop()}}),t)}))),e.getUser=function(){O.checkLoginStatus().then((function(t){t.data.user?(console.log("Existing session; logged in."),e.setState({loggedIn:!0})):(console.log("No existing session."),e.setState({loggedIn:!1}))}))},e.setLoggedInStatus=function(t){e.setState({loggedIn:t})},e.fetchLocalStorage=Object(p.a)(u.a.mark((function t(){var a,n,r,s,c,o,i,l,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Fetching state from local storage..."),!(a=JSON.parse(localStorage.getItem("appState")))){t.next=6;break}return n=a.rowCount,r=a.currentSpecies,s=a.currentPosKits,c=a.currentNegKits,o=a.tableKitIDs,i=a.tableKitData,l=a.arrayedKitData,p=a.tableRowsHash,t.next=6,e.setState({rowCount:n,currentSpecies:r,currentPosKits:s,currentNegKits:c,tableKitIDs:o,tableKitData:i,arrayedKitData:l,tableRowsHash:p});case 6:console.log("State loaded.");case 7:case"end":return t.stop()}}),t)}))),e.fetchKitsFromDatabase=Object(p.a)(u.a.mark((function t(){var a,n,r,s,c,o,l,p,m,d,b,f,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Fetching kits from database..."),t.next=3,O.getAllKits();case 3:a=t.sent,n=a.data.data,r=[],s=Object(i.a)(n);try{for(s.s();!(c=s.n()).done;)o=c.value,l=o.id,p=o.name,m=o.species,d=o.type,b=o.constants,r.push({id:l,name:p,species:m,type:d,constants:b})}catch(u){s.e(u)}finally{s.f()}return f=e.extractAllSpecies(r).sort(),h=e.createKitIDHash(r),t.next=12,e.setState({allKits:r,allSpecies:f,allKitIDs:h});case 12:console.log("All kits loaded.");case 13:case"end":return t.stop()}}),t)}))),e.createKitIDHash=function(e){var t,a=new Set,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.add(r.id)}}catch(s){n.e(s)}finally{n.f()}return a},e.extractAllSpecies=function(e){var t,a=new Set,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.add(r.species)}}catch(s){n.e(s)}finally{n.f()}return Array.from(a)},e.updateLocalStorage=function(){localStorage.setItem("appState",JSON.stringify(e.state))},e.modifyRowCount=function(t){"add"===t?e.setState({rowCount:e.state.rowCount+1}):"subtract"===t&&e.setState({rowCount:e.state.rowCount-1})},e.selectSpecies=function(){var t=Object(p.a)(u.a.mark((function t(a){var n,r,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.allKits.filter((function(e){return e.species===a})),r=e.sortKits(n),s=r.currentPosKits,c=r.currentNegKits,t.next=4,e.setState({currentSpecies:a,currentPosKits:s,currentNegKits:c});case 4:e.updateLocalStorage();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sortKits=function(e){var t,a=[],n=[],r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;"Positive"===s.type?a.push(s):"Negative"===s.type&&n.push(s)}}catch(c){r.e(c)}finally{r.f()}return{currentPosKits:a,currentNegKits:n}},e.updateTable=function(){var t=Object(p.a)(u.a.mark((function t(a,n){var r,s,c,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object.assign({},e.state.tableKitIDs),"add"!==a){t.next=16;break}return r[n.id]=(r[n.id]||0)+1,s=r[n.id],c=n.id+" "+s,t.next=7,e.modifyTableRowsHash(a,n.species,c);case 7:return t.next=9,e.modifyRowCount(a);case 9:return t.next=11,e.setState({tableKitIDs:r});case 11:if(1!==r[n.id]){t.next=14;break}return t.next=14,e.addKitData(n.id);case 14:t.next=30;break;case 16:if("subtract"!==a){t.next=30;break}if(!r[n.id]){t.next=27;break}return o=r[n.id],i=n.id+" "+o,--r[n.id],t.next=23,e.setState({tableKitIDs:r});case 23:return t.next=25,e.modifyTableRowsHash(a,n.species,i);case 25:return t.next=27,e.modifyRowCount(a);case 27:if(r[n.id]){t.next=30;break}return t.next=30,e.removeKitData(n.id);case 30:e.updateLocalStorage();case 31:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.addKitData=function(){var t=Object(p.a)(u.a.mark((function t(a){var n,r,s,c,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(i.a)(e.state.allKits),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=13;break}if((s=r.value).id!==a){t.next=11;break}return c=[].concat(Object(o.a)(e.state.tableKitData),[s]),l=e.hashifyKitData(c),t.next=10,e.setState({tableKitData:c,arrayedKitData:l});case 10:return t.abrupt("return");case 11:t.next=3;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n.e(t.t0);case 18:return t.prev=18,n.f(),t.finish(18);case 21:return console.log("Kit not found in allKits."),t.abrupt("return");case 23:case"end":return t.stop()}}),t,null,[[1,15,18,21]])})));return function(e){return t.apply(this,arguments)}}(),e.removeKitData=function(t){var a=e.state.tableKitData.filter((function(e){return e.id!==t})),n=e.hashifyKitData(a);e.setState({tableKitData:a,arrayedKitData:n})},e.updateTableKitData=function(){var t=Object(p.a)(u.a.mark((function t(a,n){var r,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(k.cloneDeep)(e.state.tableKitData),"update"!==n){t.next=15;break}s=0;case 3:if(!(s<r.length)){t.next=10;break}if(r[s].id!==a.id){t.next=7;break}return r[s]=a,t.abrupt("break",10);case 7:s++,t.next=3;break;case 10:return c=e.hashifyKitData(r),t.next=13,e.setState({tableKitData:r,arrayedKitData:c});case 13:t.next=18;break;case 15:if("delete"!==n){t.next=18;break}return t.next=18,e.deleteKitFromTable(a.id,a.species);case 18:e.updateLocalStorage();case 19:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.hashifyKitData=function(t){var a,n={},r=Object(i.a)(t);try{for(r.s();!(a=r.n()).done;){var s=a.value;n[s.species]=(n[s.species]||[]).concat(s)}}catch(c){r.e(c)}finally{r.f()}return e.arrayifyKitData(n)},e.arrayifyKitData=function(e){var t=[];for(var a in e){var n=[a,e[a]];t.push(n)}return t},e.modifyTableRowsHash=function(){var t=Object(p.a)(u.a.mark((function t(a,n,r){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(k.cloneDeep)(e.state.tableRowsHash),"add"===a?(s[n]||(s[n]={}),s[n][r]=[void 0,void 0]):"subtract"===a&&delete s[n][r],t.next=4,e.setState({tableRowsHash:s});case 4:e.updateLocalStorage();case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.updateRowCellCount=function(){var t=Object(p.a)(u.a.mark((function t(a,n,r,s){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(k.cloneDeep)(e.state.tableRowsHash),"cellCount"===a?c[n][r][1]=s:"sampleID"===a&&(c[n][r][0]=s),t.next=4,e.setState({tableRowsHash:c});case 4:e.updateLocalStorage();case 5:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),e.deleteSpeciesFromTable=function(){var t=Object(p.a)(u.a.mark((function t(a){var n,r,s,c,o,i,l,p,m,d,b,f;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=Object(k.cloneDeep)(e.state),r=n.rowCount,s=n.tableKitIDs,c=n.tableKitData,o=n.arrayedKitData,i=n.tableRowsHash,l=i[a],p=Object.keys(l).length,r-=p,delete i[a],m=[],c=c.filter((function(e){return e.species!==a||(m.push(e.id),!1)})),d=0,b=m;d<b.length;d++)f=b[d],delete s[f];return o=o.filter((function(e){return e[0]!==a})),t.next=12,e.setState({rowCount:r,tableKitIDs:s,tableKitData:c,arrayedKitData:o,tableRowsHash:i});case 12:e.updateLocalStorage();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteKitFromTable=function(){var t=Object(p.a)(u.a.mark((function t(a,n){var r,s,c,o,i,l,p,m,d,b;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(m in r=Object(k.cloneDeep)(e.state),s=r.rowCount,c=r.tableKitIDs,o=r.tableKitData,i=r.tableRowsHash,l=0,p=i[n])m.slice(0,-2)===a&&(++l,delete p[m]);for(d in s-=l,c)d===a&&delete c[d];return o=o.filter((function(e){return e.id!==a})),b=e.hashifyKitData(o),t.next=11,e.setState({rowCount:s,tableKitIDs:c,tableKitData:o,arrayedKitData:b,tableRowsHash:i});case 11:e.updateLocalStorage();case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.clearTable=Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({rowCount:0,tableKitIDs:{},tableKitData:[],arrayedKitData:[],tableRowsHash:{}});case 2:e.updateLocalStorage();case 3:case"end":return t.stop()}}),t)}))),e.state={loggedIn:!1,allKits:[],rowCount:0,currentSpecies:"No Species Selected",currentPosKits:[],currentNegKits:[],tableKitIDs:{},tableKitData:[],arrayedKitData:[],tableRowsHash:{},allSpecies:[],allKitIDs:{}},e.selectSpecies=e.selectSpecies.bind(Object(b.a)(e)),e.updateTable=e.updateTable.bind(Object(b.a)(e)),e.clearTable=e.clearTable.bind(Object(b.a)(e)),e.deleteSpeciesFromTable=e.deleteSpeciesFromTable.bind(Object(b.a)(e)),e.deleteKitFromTable=e.deleteKitFromTable.bind(Object(b.a)(e)),e.fetchKitsFromDatabase=e.fetchKitsFromDatabase.bind(Object(b.a)(e)),e.updateTableKitData=e.updateTableKitData.bind(Object(b.a)(e)),e.setLoggedInStatus=e.setLoggedInStatus.bind(Object(b.a)(e)),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{className:"main"},r.a.createElement(F,{loggedIn:this.state.loggedIn,setLoggedInStatus:this.setLoggedInStatus}),r.a.createElement(v.c,null,r.a.createElement(v.a,{path:"/kits",render:function(t){return r.a.createElement(w,Object.assign({},t,{loggedIn:e.state.loggedIn,currentSpecies:e.state.currentSpecies,currentPosKits:e.state.currentPosKits,currentNegKits:e.state.currentNegKits,rowCount:e.state.rowCount,tableKitIDs:e.state.tableKitIDs,updateTable:e.updateTable}))}}),r.a.createElement(R,{path:"/edit/:kitID",component:j,loggedIn:this.state.loggedIn,allKits:this.state.allKits,rowCount:this.state.rowCount,allKitIDs:this.state.allKitIDs,currentSpecies:this.state.currentSpecies,allSpecies:this.state.allSpecies,fetchKitsFromDatabase:this.fetchKitsFromDatabase,selectSpecies:this.selectSpecies,updateTableKitData:this.updateTableKitData}),r.a.createElement(R,{path:"/create",component:j,loggedIn:this.state.loggedIn,allKits:this.state.allKits,rowCount:this.state.rowCount,allKitIDs:this.state.allKitIDs,currentSpecies:this.state.currentSpecies,allSpecies:this.state.allSpecies,fetchKitsFromDatabase:this.fetchKitsFromDatabase,selectSpecies:this.selectSpecies}),r.a.createElement(v.a,{path:"/table",render:function(t){return r.a.createElement(N,Object.assign({},t,{loggedIn:e.state.loggedIn,tableKitIDs:e.state.tableKitIDs,tableKitData:e.state.tableKitData,arrayedKitData:e.state.arrayedKitData,tableRowsHash:e.state.tableRowsHash,selectSpecies:e.selectSpecies,updateTable:e.updateTable,updateRowCellCount:e.updateRowCellCount,deleteSpeciesFromTable:e.deleteSpeciesFromTable,deleteKitFromTable:e.deleteKitFromTable,clearTable:e.clearTable}))}}),r.a.createElement(v.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(y,Object.assign({},t,{rowCount:e.state.rowCount,allSpecies:e.state.allSpecies,selectSpecies:e.selectSpecies}))}}),r.a.createElement(v.a,{path:"/error",render:function(t){return r.a.createElement(T,Object.assign({},t,{rowCount:e.state.rowCount}))}})))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.a8b5e82f.chunk.js.map